# Khai thác mẫu thường xuyên, kết hợp và tương quan: Những khái niệm và phương pháp cơ bản
Hãy tưởng tượng rằng bạn là một manager tại một cửa hàng bán các sản phẩm điện tử. Hôm nay, bạn đang nói chuyện với một khách hàng mà gần đây, anh ta có mua một chiếc PC và một chiếc máy ảnh kĩ thuật số từ cửa hàng của bạn. Vậy hôm nay, bạn nên giới thiệu cho vị khách hàng đó những mặt hàng nào để anh ta tiếp tục móc hầu bao của mình ra để làm giàu cho cửa hàng bạn? Thông tin về những sản phẩm thường được các khách hàng trước đây mua sau khi họ mua PC và máy ảnh kĩ thuật số sẽ rất hữu ích trong việc giúp bạn đưa ra các gợi ý cho vị khách hàng hiện tại.

Những **mẫu thường xuyên** và các **quy tắc kết hợp** là những kiến thức cần thiết sẽ giúp ích cho bạn rất nhiều trong một tình huống như vậy.

## I.Mẫu thường xuyên (frequent pattern)
Là những mẫu (ví dụ như các *itemset*, *subsequence*, *substructure* đều có thể gọi là những mẫu) mà nó xuất hiện thường xuyên trong dataset của bạn. Lấy ví dụ, trong dataset bán hàng của bạn, có các mặt hàng là *milk* và *bread*, chúng thường xuyên xuất hiện cùng nhau trong dữ liệu giao dịch của bạn, thì lúc này chúng được gọi là **frequent itemset**. Một ví dụ khác cho trường hợp *subsequence*, chẳng hạn như khách hàng của bạn mua chiếc PC trước, sau đó anh ta mới mua máy ảnh kĩ thuật số, rồi sau đó anh ta tiếp tục mua một cái thẻ nhớ, nếu như cái quá trình mua hàng này cứ lặp đi lặp lại, xuất hiện nhiền lần trong dataset của bạn thì đây được gọi là **(frequent) sequential pattern**. Lại thêm một ví dụ nữa cho trường hợp *substructure*, một *substructure* có thể là những hình thể cấu trúc khác nhau (này hơi lan man), chẳng hạn như là một cái biểu đồ con (subgraph), một cây con (subtree) hay là một phân lớp con (sublattice) nào đó mà khi ta kết hợp chúng với các *itemset* hay *subsequence*, nếu *substructure* này xuất hiện thường xuyên, khi đó ta gọi nó là **(frequent) structured pattern**.

Việc tìm kiếm các **frequent pattern** đóng vai trò thiết yếu trong việc khai thác luật kết hợp, những mối tương quan hay giúp ta tìm được những mối quan hệ thú vị trong dataset của mình.

Ngoài ra nó còn giúp ta phân loại dữ liệu (data classification), phân cụm (clustering) hay các công việc liên quan đến khai thác dữ liệu khác.

Vậy nên, khai thác mẫu thường xuyên (**frequent pattern mining**) đã trở thành một công việc hết sức quan trọng trong khai thác dữ liệu (**data mining**) và là một chủ đề được đem ra nghiên cứu rất nhiều trong lĩnh vực này.

## II.Các khái niệm cơ bản
### III.1. Market Basket Analysis - Một ví dụ tạo động lực
Khai thác **frequent itemset** dẫn đến việc phát hiện ra các mối quan hệ và sự tương quan giữa các item trong dataset. Với lượng dữ liệu khổng lồ liên tục được thu thập và lưu trữ, nhiều ngành công nghiệp đang trở nên quan tâm đến việc khai thác các *pattern* trong database của họ. Việc phát hiện ra các mối quan hệ tương quan giữa một số lượng lớn các giao dịch kinh doanh có thể giúp ích trong nhiều quá trình đưa ra quyết định trong kinh doanh như thiết kế các danh mục, tiếp thị chéo và phân tích hành vi của khách hàng.

Một ví dụ điển hình cho khai thác **frequent itemset** là bài toán ***Market basket analysis***. Đây là quá trình phân tích các thói quen mua hàng của khách hàng bằng cách tìm ra các mối liên hệ giữa các mặt hàng khác nhau được đặt trong các giỏ hàng của khách hàng *(hình 6.1)*. Việc phát hiện ra các mối kết hợp này có thể giúp cho các nhà bán lẻ phát triển ra được các chiến lược tiếp thị bằng cách hiểu rõ hơn về những mặt hàng mà thường xuyên được mua cùng nhau bởi khách hàng của họ. Chẳng hạn, nếu khách hàng của họ mua sữa, khả năng những khách hàng đó cũng sẽ mua bánh mì (và đâu là loại bánh mì được các khách hàng hay mua) trong cùng một chuyến đi chợ như vậy. Những thông tin như vậy sẽ dẫn đến gia tăng doanh số bán hàng nhờ việc các nhà bán lẻ thực hiện các hình thức tiếp thị có chọn lọc và thiết kế không gian trưng bày cho sản phẩm của họ.

*Hình 6.1*
![hình 6.1](https://f8.photo.talk.zdn.vn/834296653611579108/7188d1563adec18098cf.jpg)

##### Ví dụ 6.1
**Bài toán Market basket analysis**: Giả sử, bạn là manager của một chi nhánh bán hàng điện tử, gần đây bạn đang muốn tìm hiểu thêm về thói quen mua hàng của khách hàng. Cụ thể, bạn sẽ tự hỏi: 'Nhóm nào hay những mặt hàng nào mà khách hàng của bạn có khả năng mua trong một chuyến đi chợ?'. Để trả lời cho câu hỏi đó, chúng ta sẽ thực hiện quá trình khai thác trên dữ liệu bán lẻ các giao dịch của khách hàng tại của hàng của bạn. Sau khi có kết quả, chúng ta có thể sử dụng kết quả đó để hoạch định ra chiến lược tiếp thị hoặc quảng cáo hay thiết kế lại việc trình bày các mặt hàng như thế nào. Chẳng hạng **market basket analysis** giúp bạn thiết kế các bố cục cửa hàng khác nhau, như chúng ta có thể xếp các mặt hàng mà khách hàng hay mua cùng nhau lại gần với nhau hơn để khuyến khích khách hàng cũ cũng như mới nên mua những mặt hàng này cùng nhau nhiều hơn nữa. Hoặc một trường hợp khác, khách hàng mua laptop hay có xu hướng mua kèm phần mềm diệt virus, thì bạn có thể đặt sản phẩm laptop nằm gần các phần mềm diệt virus để thúc đẩy doanh số của cả 2 sản phẩm này lên.

Trong một chiến lược khác, ta có thể đặt 2 sản phẩm là laptop và phần mềm diệt virus nằm đối diện nhau tại 2 đầu của cửa hàng, để khi khách hàng đi từ đầu này sang đầu kia để mua laptop rồi phần mềm diệt virus, trên đường đi có thể họ sẽ mua thêm những mặt hàng khác mà ta đặt trên đường đi của họ. Chẳng hạn, khi khách hàng quyết định mua 1 chiếc máy tính đắt tiền, trên đường đi tới chổ mua phần mềm diệt virus, khi trông thấy những chiếc màn hình, họ có thể quyết định mua thêm cho mình một chiếc màn hình để sử dụng kèm laptop của họ, hay là một con chuột, bàn phím,... **Market basket analysis** có thể giúp các nhà bán lẻ lên kế hoạch những mặt hàng nào sẽ được giảm giá. Giả sử như khách hàng có xu hướng mua PC và mua máy in cùng nhau, thì ta có thể tiến hành giảm giá khi mua máy in kèm theo PC hoặc tiến hành giảm giá tiền mua PC khi mua kèm máy in.

Bây giờ giả sử chúng ta có một cửa hàng có sẵn một vài mặt hàng, theo đó mỗi mặt hàng có một biến boolean đại diện cho sự hiện diện hay vắng mặt của mặt hàng đó. Mỗi giỏ hàng sẽ được biểu thị bằng một vector boolean, các vector này sẽ được phân tích qua đó phản ảnh được đâu là những mặt hàng hay được kết hợp hay mua cùng nhau. Những mẫu này có thể được thể hiện dưới dạng những quy tắc kết hợp (**association rule**). Ví dụ: thông tin khách hàng mua máy tính cũng có xu hướng mua phần mềm chống virus sẽ được trình bày theo quy tắc kết hợp sau:

> **computer => antivirus_software[support = 2%, confidence = 60%]**

