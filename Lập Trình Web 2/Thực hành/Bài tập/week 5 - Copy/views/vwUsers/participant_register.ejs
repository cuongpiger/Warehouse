<%- include('../partials/header') %>
<div class="container-fluid">
  <div class="row justify-content-center mt-3">
    <div class="col-md-4 card p-4 d-flex justify-content-center">
      <form action="/users/event_register" method="POST" name="myForm" onsubmit="return validateForm()">
        <div class="form-group">
          <% if (typeof flag !== "undefined") { %> 
            <div class="alert alert-<%= +flag === 1 ? "success" : "danger" %>" role="alert">
              <%= +flag === 1 ? thanks : "Fail" %>
            </div>
          <% } %> 
          <label for="exampleInputPassword1">Name</label>
          <input
            type="text"
            class="form-control"
            name="name"
            placeholder="Enter your name"
          />
        </div>
        <div class="form-group">
          <label for="exampleInputEmail1">Email address</label>
          <input
            type="email"
            class="form-control"
            name="email"
            aria-describedby="emailHelp"
            placeholder="Enter email"
          />
        </div>
        <div class="form-group">
          <label>Events</label>
          <select class="form-control" name="event">
            <% events.forEach((el, i) => { %>
            <option value="<%= el.id %>"><%= el.title %></option>  
            <% }); %>  
          </select>
        </div>
        <button type="submit" class="btn btn-primary w-100 mt-3">Submit</button>
        <div class="mt-3 text-center">
          <a href="/">Go to homepage</a>
        </div>
      </form>
    </div>
  </div>
</div>
<%- include('../partials/footer') %>

<script type="text/javascript">
  function validateForm() {
    var x = document.forms["myForm"]["name"].value;
    if (x == "") {
      alert("Name must be filled out");
      return false;
    }

    var y = document.forms["myForm"]["email"].value;
    if (y == "") {
      alert("Email must be filled out");
      return false;
    }
  }
</script>